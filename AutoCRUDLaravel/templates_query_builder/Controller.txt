<?php

namespace App\Http\Controllers;

use App\Models\{model_name};
use Illuminate\Http\Request;

class {controller_name} extends Controller
{
    public function __construct()
    {
        $this->middleware('auth');
    }

    public function index()
    {

        return view('{folder_name}/index', [
            'data' => {model_name}::GetAll(),
        ]);
    }

	public function create()
    {
        return view('{folder_name}/create');
    }

    public function store(Request $request)
    {
        if ({model_name}::SaveObject($request) > 0)
            return ['success' => true, 'message' => 'Registo criado com sucesso', 'id' => $id];
        else
            return ['success' => false, 'message' => 'Ocorreu um erro inesperado ao criar o novo registo'];
    }

    public function edit(Request $request)
    {
        $data = {model_name}::GetObject($request->id);

        if ($data == null)
            return redirect()->route('{route_main_path}.index')->with(['message' => 'O registo selecionado não foi encontrado']);

        return view('{folder_name}/edit', [
            'data' => $data
        ]);
    }

    public function update(Request $request)
    {
        if ({model_name}::UpdateObject($request))
            return ['success' => true, 'message' => 'Registo editado com sucesso'];
        else
            return ['success' => false, 'message' => 'Ocorreu um erro inesperado ao atualizar este registo'];
    }

    public function destroy(Request $request)
    {
        $data = {model_name}::GetObject($request->id);

        if ($data == null)
            return ['success' => false, 'message' => 'O registo selecionado não foi encontrado'];

        if ({model_name}::DeleteObject($request->id))
            return ['success' => true, 'message' => 'O registo foi eliminado com sucesso'];
        else
            return ['success' => false, 'message' => 'Ocorreu um erro inesperado ao eliminar este registo'];
    }
}